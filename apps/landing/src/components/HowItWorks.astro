---
import type { Messages } from "../i18n";

interface Props {
	t: Messages["howItWorks"];
}
const { t } = Astro.props;

const steps = [
	{ number: "01", label: t.step1, icon: ">" },
	{ number: "02", label: t.step2, icon: "#" },
	{ number: "03", label: t.step3, icon: "$" },
	{ number: "04", label: t.step4, icon: "!" },
];
---

<section id="how-it-works" class="py-24 px-6 bg-surface-base">
	<div class="max-w-5xl mx-auto">
		<h2 class="font-pixel text-lg sm:text-xl md:text-2xl text-center text-text-primary mb-4">
			{t.title}
		</h2>
		<p class="font-mono text-sm text-text-secondary text-center mb-16">
			{t.subtitle}
		</p>

		<!-- Steps flow -->
		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
			{steps.map((step, i) => (
				<div class="relative">
					<div class="bg-surface-raised border border-border-subtle rounded-lg p-6 text-center hover:border-border-cyan transition-all duration-300">
						<div class="font-mono text-xs text-terminal-green mb-4">
							<span class="text-text-muted">$</span> step[{step.number}]
						</div>

						<div class="w-12 h-12 mx-auto mb-4 rounded-md bg-surface-overlay border border-border-subtle flex items-center justify-center font-pixel text-lg text-cyan">
							{step.icon}
						</div>

						<p class="font-mono text-sm text-text-primary font-medium">
							{step.label}
						</p>
					</div>

					{i < steps.length - 1 && (
						<div class="hidden lg:flex absolute top-1/2 -right-3 transform -translate-y-1/2 z-10 text-text-muted font-mono text-lg">
							&rarr;
						</div>
					)}
				</div>
			))}
		</div>

		<!-- Terminal output decoration -->
		<div class="mt-12 max-w-xl mx-auto bg-surface-raised border border-border-subtle rounded-lg p-4 font-mono text-xs">
			<div class="flex items-center gap-2 mb-3">
				<span class="w-3 h-3 rounded-full bg-coral/60"></span>
				<span class="w-3 h-3 rounded-full bg-amber/60"></span>
				<span class="w-3 h-3 rounded-full bg-terminal-green/60"></span>
				<span class="text-text-muted ml-2">agent-cli</span>
			</div>
			<div class="text-text-secondary space-y-1">
				<p><span class="text-terminal-green">$</span> {t.terminalLine1}</p>
				<p class="text-text-muted">{t.terminalLine2}</p>
				<p class="text-text-muted">{t.terminalLine3}</p>
				<p class="text-terminal-green">&#10003; {t.terminalLine4}</p>
				<p class="text-cyan">&#8594; {t.terminalLine5}</p>
			</div>
		</div>

		<div class="mt-10 text-center">
			<a
				href="https://app.clawtrainer.ai"
				class="inline-flex items-center gap-2 px-8 py-4 bg-cyan/10 hover:bg-cyan/20 border border-cyan/50 text-cyan font-mono font-semibold text-sm rounded-md shadow-glow-cyan transition-all duration-200 hover:scale-105 group"
			>
				<span>{t.cta}</span>
				<span class="group-hover:translate-x-1 transition-transform">&rarr;</span>
			</a>
		</div>
	</div>
</section>
