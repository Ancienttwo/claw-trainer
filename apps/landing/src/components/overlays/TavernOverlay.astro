---
import type { Messages } from "../../i18n";

interface Props {
	t: Messages["techStack"];
}
const { t } = Astro.props;

const badges = [
	{ label: "ERC-8004", color: "coral" as const },
	{ label: "BAP-578", color: "coral" as const },
	{ label: "Merkle Learning", color: "coral" as const },
	{ label: "EIP-712", color: "cyan" as const },
	{ label: "Solidity", color: "cyan" as const },
	{ label: "Viem", color: "amber" as const },
	{ label: "Wagmi", color: "amber" as const },
];

const badgeColors = {
	coral: "border-coral/30 text-coral bg-coral/5",
	cyan: "border-cyan/30 text-cyan bg-cyan/5",
	amber: "border-amber/30 text-amber bg-amber/5",
} as const;
---

<div class="w-full max-w-4xl rounded-2xl border border-panel-border bg-panel-bg px-8 py-10 shadow-card backdrop-blur-sm">
	<div class="text-center">
		<h2 class="mb-4 font-pixel text-lg text-text-primary sm:text-xl md:text-2xl">
			{t.title}
		</h2>
		<p class="mx-auto mb-10 max-w-2xl font-mono text-sm leading-relaxed text-text-secondary">
			{t.description}
		</p>

		<!-- Tech badges -->
		<div class="mb-12 flex flex-wrap justify-center gap-3">
			{badges.map((badge) => (
				<span class={`inline-block rounded-md border px-4 py-2 font-mono text-xs font-medium ${badgeColors[badge.color]}`}>
					{badge.label}
				</span>
			))}
		</div>

		<!-- Architecture code block (DARK bg) -->
		<div class="mx-auto max-w-lg overflow-hidden rounded-lg border border-panel-border text-left">
			<div class="flex items-center gap-2 border-b border-[#2A2A3E] bg-[#1A1A2E] px-4 py-3">
				<span class="h-3 w-3 rounded-full bg-coral/60"></span>
				<span class="h-3 w-3 rounded-full bg-amber/60"></span>
				<span class="h-3 w-3 rounded-full bg-terminal-green/60"></span>
				<span class="ml-2 font-mono text-xs text-[#8888A0]">architecture.sol</span>
			</div>
			<div class="space-y-1 bg-[#1A1A2E] p-5 font-mono text-xs text-[#C0C0D0]">
				<p class="text-[#8888A0]">// dual-standard architecture</p>
				<p class="text-[#8888A0]">// ERC-8004: Official Identity + Reputation</p>
				<p><span class="text-cyan">IdentityRegistry</span>.<span class="text-white">register</span>(agentURI) &rarr; agentId</p>
				<p><span class="text-cyan">ReputationRegistry</span>.<span class="text-white">giveFeedback</span>(agentId, score, &quot;starred&quot;)</p>
				<p class="mt-2"></p>
				<p class="text-[#8888A0]">// BAP-578: Agent Lifecycle + Learning</p>
				<p><span class="text-coral">ClawTrainerNFA</span>.<span class="text-white">activate</span>(agentId, metadata, sig)</p>
				<p><span class="text-coral">ClawTrainerNFA</span>.<span class="text-white">updateLearning</span>(tokenId, merkleUpdate)</p>
			</div>
		</div>
	</div>
</div>
